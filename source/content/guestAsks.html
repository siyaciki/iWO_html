<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.min.css" rel="stylesheet" />
		<style type="text/css">
			<style>.mui-card .mui-control-content {
				padding: 10px;
			}
			
			body {
				background-color: white;
			}
			
			.mui-control-content {
				height: 150px;
			}
			
			#asks {
				background: #EC971F;
				color: #EEEEEE;
				margin: 10px 0 10px 0;
			}
			
			#askss {
				background: #000000;
				color: #EEEEEE;
				margin: 10px 0 10px 0;
			}
			
			#guest1 {
				width: 3px;
				height: 20px;
			}
			
			#guest2 {
				width: 3px;
				height: 20px;
			}
			
			.mui-control-content {
				background-color: white;
				min-height: 900px;
			}
			
			.mui-control-content .mui-loading {
				margin-top: 50px;
			}
			
			.li_inline {
				font-size: 17px;
				display: inline-block;
				margin-right: 0px;
				padding: 10px 0 0 14px;
				text-align: center;
				vertical-align: middle;
				background: 0 0
			}
			
			.delhang {
				display: inline;
			}
			
			#switch {
				margin: 7px 0 0 0;
			}
		</style>

	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">乘客请求</h1>
			<div id="switch" class="mui-switch mui-active mui-pull-right">
				<div class="mui-switch-handle"></div>
			</div>
		</header>

		<script src="../../js/mui.min.js"></script>
		<script type="text/javascript">
			mui.init();
		</script>
		<div class="mui-content">
			<div style="margin: 5px 5px;">
				<div id="item1" class="mui-control-content mui-active">
					<div id="scroll" class="mui-scroll-wrapper">
						<div class="mui-scroll">
							<div id="slider" class="mui-slider">
								<div id="sliderSegmentedControl" class="mui-slider-indicator mui-segmented-control mui-segmented-control-inverted">
									<a class="mui-control-item" href="#item1mobile">
										乘客请求（未处理）
									</a>
									<a class="mui-control-item" href="#item2mobile">
										乘客请求（已处理）
									</a>
								</div>
								<div id="sliderProgressBar" class="mui-slider-progress-bar mui-col-xs-6"></div>
								<div class="mui-slider-group">
									<div id="item1mobile" class="mui-slider-item mui-control-content mui-active">
										<div id="scroll1" class="mui-scroll-wrapper">
											<div class="mui-scroll">
												<ul class="mui-table-view mui-table-view-striped mui-table-view-condensed">
												</ul>
											</div>
										</div>
									</div>
									<div id="item2mobile" class="mui-slider-item mui-control-content">
										<div id="scroll2" class="mui-scroll-wrapper">
											<div class="mui-scroll">
												<ul class="mui-table-view mui-grid-view ">
												</ul>
											</div>
										</div>

									</div>
								</div>
							</div>

						</div>
					</div>

				</div>

			

			</div>

		</div>

	</body>
	<script src="../../js/jquery-1.8.0.js"></script>
	<script>
		jQuery(function() {
					var numss = localStorage.getItem('noticeNum');
					var a_cont = new Array();
					a_cont['nums'] = numss;
					var cont = a_cont.toString();
					jQuery.ajax({
							url: 'http://192.168.1.35:8082/mixes/guestAsks.php',
							type: 'post',
							dataType: 'json',
							data: cont,
							async: false,
							success: function(data) {
								var lens = data.length;
								//json数组的元素个数
								var key_array = Array();
								for(var i = 0; i < lens; i++) {
									//遍历元素数组
									for(var key in data[i]) {
										key_array.push(data[i][key]);
									}
									//计算时间差
									var time_now=new Date().getTime();
									var time_begin=key_array[2]*1000;
									var time_last=time_now-time_begin;
									var time_gap=Math.round(time_last/60000);
									var unixTimestamp = new Date(key_array[6] * 1000);
									var time_over= unixTimestamp.toLocaleString();
									jQuery("ul").eq(1).append("<li class='mui-table-view-cell'><div class='mui-table'><div class='mui-table-cell mui-col-xs-2'><span class='mui-h3'>" + key_array[0] + "</span></div><div class='mui-table-cell mui-col-xs-1'><b>" + key_array[1] + "</b></div><div class='mui-table-cell mui-col-xs-4 mui-text-right'><span class='mui-h3'>" + key_array[3] + "</span></div><div class='mui-table-cell mui-col-xs-5'><p class='mui-h5'><b>" + time_over + "</b></p></div></div></li>");
									jQuery("ul").eq(0).append("<li class='mui-table-view-cell'><div class='mui-table'><div class='mui-table-cell mui-col-xs-2'><span class='mui-h3'>" + key_array[0] + "</span></div><div class='mui-table-cell mui-col-xs-1'><b>" + key_array[1] + "</b></div><div class='mui-table-cell mui-col-xs-3 mui-text-right'><span class='mui-h3'>" + key_array[3] + "</span></div><div class='mui-table-cell mui-col-xs-3'><p class='mui-h5'><b>" + time_gap + "分钟前</b></p></div><div class='mui-table-cell mui-col-xs-3'><select class='mui-btn' style='width:4.4em; text-align: center;'><option value='item-1'>响应</option><option value='item-2'>忽略</option><option value='item-3'>屏蔽</option></select></div></div></li>");
									key_array.splice(0, key_array.length);
									}
								},
								error: function(XMLHttpRequest, textStatus, errorThrown) {
									var str = "连接错误" + XMLHttpRequest.status + "---" + XMLHttpRequest.readyState + textStatus + "naiyo" + XMLHttpRequest.responseText;
									mui.toast(str);
								}
							});
					}); document.getElementById("switch").addEventListener('toggle', function(event) {
					//event.detail.isActive 可直接获取当前状态
					//mui.toast('状态：' + (event.detail.isActive ? 'true' : 'false'));
					if(event.detail.isActive == false) {
						jQuery(".mui-content").hide();
					} else {
						jQuery(".mui-content").show();
					}
				});
	</script>
	<script src="../js/mui.min.js"></script>
	<script>
		mui.init({
			swipeBack: false
		});

		(function($) {
			$('.mui-scroll-wrapper').scroll({
				indicators: true //是否显示滚动条
			});
			var sliderSegmentedControl = document.getElementById('sliderSegmentedControl');
			$('.mui-input-group').on('change', 'input', function() {
				if(this.checked) {
					sliderSegmentedControl.className = 'mui-slider-indicator mui-segmented-control mui-segmented-control-inverted mui-segmented-control-' + this.value;
					//force repaint
					sliderProgressBar.setAttribute('style', sliderProgressBar.getAttribute('style'));
				}
			});

		})(mui);
	</script>

</html>